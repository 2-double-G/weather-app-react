(this["webpackJsonpreact-weather-app"]=this["webpackJsonpreact-weather-app"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports={WeatherToday:"WeatherToday__WeatherToday--2oT2v",current:"WeatherToday__current--ScwKL",MaxMin:"WeatherToday__MaxMin--lmhfA",city:"WeatherToday__city--1Dc8y",date:"WeatherToday__date--32A5K",condition:"WeatherToday__condition--3HKZg",conditionIcon:"WeatherToday__conditionIcon--koi-u",realFeels:"WeatherToday__realFeels--8GWgF"}},,,,,function(e,t,a){e.exports={WeatherHourly:"WeatherHourly__WeatherHourly--1isnR",WeatherHourly__item:"WeatherHourly__WeatherHourly__item--1NBvx",filterButtons:"WeatherHourly__filterButtons--NNuUB",cityName:"WeatherHourly__cityName--1g0nI"}},function(e,t,a){e.exports={WeatherWeekly:"WeatherWeekly__WeatherWeekly--NxhJD",WeatherWeekly__item:"WeatherWeekly__WeatherWeekly__item--2wg1p",description:"WeatherWeekly__description--10yVK"}},,,,,,function(e,t,a){e.exports={MenuIcon:"MenuIcon__MenuIcon--10K6V"}},function(e,t,a){e.exports={Menu:"Menu__Menu--3yNfz",close:"Menu__close--4PUeo"}},,,,function(e,t,a){e.exports={GetWeather:"GetWeather__GetWeather--1aJrP",SearchForm:"GetWeather__SearchForm--1MY8D"}},function(e,t,a){e.exports={Input:"Input__Input--2JD9x",invalid:"Input__invalid--2PJ1J"}},function(e,t,a){e.exports={Loader:"Loader__Loader--7CH6c","lds-dual-ring":"Loader__lds-dual-ring--1q2wY"}},,function(e,t,a){e.exports={Layout:"Layout__Layout--2wiTF"}},,function(e,t,a){e.exports={Main:"Main__Main--1n1Il"}},function(e,t,a){e.exports={Button:"Button__Button--3bi60"}},,function(e,t,a){e.exports={Links:"Links__Links--2rB1c"}},,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a.n(o),l=a(13),i=a(3),u=a(4),s=a(5),h=a(7),m=a(6),p=a(35),d=a.n(p),y=a(26),f=a.n(y),E=function(e){var t=[f.a.MenuIcon,"fas"];return e.isOpen?(t.push("fa-times"),t.push(f.a.open)):t.push("fa-bars"),r.a.createElement("i",{className:t.join(" "),onClick:e.onToggle})},v=a(27),g=a.n(v),w=[{to:"/",label:"Search weather",exact:!0},{to:"/today",label:"Today",exact:!1},{to:"/hourly",label:"Hourly",exact:!1},{to:"/weekly",label:"Weekly",exact:!1}],b=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).clickHandler=function(){e.props.onCLose()},e}return Object(s.a)(a,[{key:"renderLinks",value:function(){var e=this;return w.map((function(t,a){return r.a.createElement("li",{key:a},r.a.createElement(l.b,{to:t.to,exact:t.exact,onClick:e.clickHandler},t.label))}))}},{key:"render",value:function(){var e=[g.a.Menu];return this.props.isOpen||e.push(g.a.close),r.a.createElement("div",{className:e.join(" ")},r.a.createElement("nav",null,r.a.createElement("ul",null,this.renderLinks())))}}]),a}(n.Component),_=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={menu:!1},e.menuClickHandler=function(){e.setState({menu:!e.state.menu})},e}return Object(s.a)(a,[{key:"onCloseMenuHandler",value:function(){this.setState({menu:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:d.a.Layout},r.a.createElement("main",null,this.props.children),r.a.createElement(b,{isOpen:this.state.menu,onCLose:this.onCloseMenuHandler.bind(this)}),r.a.createElement(E,{isOpen:this.state.menu,onToggle:this.menuClickHandler}))}}]),a}(n.Component),O=a(11),k=a(37),W=a.n(k),j=a(2),T=a(31),S=a.n(T),C=a(32),x=a.n(C);function H(e){var t=e.valid,a=e.touched;return!t&&a}var N=function(e){var t="input-city",a=[x.a.Input];return H(e)&&a.push(x.a.invalid),r.a.createElement("div",{className:a.join(" ")},r.a.createElement("label",{htmlFor:t},e.label),r.a.createElement("input",{type:"text",name:t,value:e.value,onChange:e.onChange}),H(e)?r.a.createElement("span",null,e.errorMessage):null)},I=a(38),F=a.n(I),L=function(e){return r.a.createElement("button",{className:F.a.Button,disabled:e.disabled,onClick:e.onClick},e.children)},M=a(16),R=a.n(M),D=a(23),z="FETCH_WEATHER_START",A="FETCH_WEATHER_SUCCESS",U="FETCH_WEATHER_ERROR",B="FETCH_WEATHER_HOURLY_START",J="FETCH_WEATHER_HOURLY_SUCCESS",Y="FETCH_WEATHER_HOURLY_ERROR",G="FILTER_HOURLY_WEATHER",K="FETCH_WEATHER_WEEKLY_START",V="FETCH_WEATHER_WEEKLY_SUCCESS",q="FETCH_WEATHER_WEEKLY_ERROR",P=a(39),X=a.n(P),Z=function(e){return null===e?(console.log("City was null. Get city name from local storage"),localStorage.getItem("city")):(console.log("City was not null. Set new city name in local storage"),localStorage.setItem("city",e),e)},Q=function e(t,a){var n=null;for(var r in t){if(t.hasOwnProperty(r)&&r===a){n=t[r];break}if(X.a.object(t[r])){var o=e(t[r],a);if(o){n=o;break}}}return n},$=function(e,t){var a={};return t.forEach((function(t){a[t]=Q(e,t)})),a},ee=function(e){return function(){var t=Object(D.a)(R.a.mark((function t(a){var n,r,o,c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(te(e)),n=Z(e),t.prev=2,t.next=5,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(n,"&appid=4248d412b7d3efc097f20f1640cf0f2d&units=metric"));case 5:return r=t.sent,t.next=8,r.json();case 8:if("404"!==(o=t.sent).cod){t.next=11;break}throw new Error("City not found");case 11:c=$(o,["name","dt","timezone","feels_like","temp","temp_max","temp_min","main","icon","lat","lon"]),localStorage.setItem("coordinates",JSON.stringify({lat:c.lat,lon:c.lon})),localStorage.setItem("timezone",c.timezone),localStorage.setItem("isError",!1),a(ae(c)),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),localStorage.setItem("isError",!0),a(ne(t.t0.message));case 23:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e){return t.apply(this,arguments)}}()},te=function(e){return{type:z,city:e}},ae=function(e){return{type:A,weather:e}},ne=function(e){return{type:U,error:e}},re=function(){return{type:B}},oe=function(e,t){return{type:J,weatherHourly:e,timezone:t}},ce=function(e){return{type:Y,error:e}},le=function(){return{type:K}},ie=function(e,t){return{type:V,weatherWeekly:e,timezone:t}},ue=function(e){return{type:q,error:e}},se=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isFormValid:!1,inputControl:{value:"",label:"City",errorMessage:"Enter the city name correctly",valid:!1,touched:!1,validation:{minLength:1,required:!0}}},e.onFormSubmit=function(e){e.preventDefault()},e.handleInputChange=function(t){var a=Object(j.a)({},e.state.inputControl);a.value=t.target.value,a.touched=!0,a.valid=e.validation(a.value,a.validation);var n=a.valid;e.setState({isFormValid:n,inputControl:a})},e.getWeather=function(){e.state.isFormValid&&e.props.fetchTodayWeather(e.state.inputControl.value)},e}return Object(s.a)(a,[{key:"validation",value:function(e,t){if(!t)return!0;var a=!0;return t.required&&(a=""!==e.trim()&&a),t.minLength&&(a=e.length>=t.minLength&&a),a}},{key:"renderInput",value:function(){var e=Object(j.a)({},this.state.inputControl);return r.a.createElement(N,{value:e.value,label:e.label,valid:e.valid,touched:e.touched,errorMessage:e.errorMessage,onChange:this.handleInputChange})}},{key:"renderButton",value:function(){return r.a.createElement(L,{disabled:!this.state.isFormValid,onClick:this.getWeather},"Get weather")}},{key:"render",value:function(){return r.a.createElement("div",{className:S.a.GetWeather},r.a.createElement("h1",null,"Search weather"),r.a.createElement("form",{onSubmit:this.onFormSubmit,className:S.a.SearchForm},this.renderInput(),this.renderButton()))}}]),a}(n.Component);var he=Object(O.b)(null,(function(e){return{fetchTodayWeather:function(t){return e(ee(t))}}}))(se),me=a(40),pe=a.n(me),de=[{to:"/today",label:"Today",exact:!1},{to:"/hourly",label:"Hourly",exact:!1},{to:"/weekly",label:"Weekly",exact:!1}],ye=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"renderLinks",value:function(){return de.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(l.b,{to:e.to,exact:e.exact},e.label))}))}},{key:"render",value:function(){return r.a.createElement("nav",{className:pe.a.Links},r.a.createElement("ul",null,this.renderLinks()))}}]),a}(n.Component),fe=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:W.a.Main},r.a.createElement(he,null),this.props.touched?this.props.error?r.a.createElement("p",null,"Sorry, man. You are wrong."):r.a.createElement(ye,null):null)}}]),a}(n.Component);var Ee=Object(O.b)((function(e){return{touched:e.weatherToday.touched,error:e.weatherToday.error.isError}}))(fe),ve=a(14),ge=a.n(ve),we=a(33),be=a.n(we),_e=function(){return r.a.createElement("div",{className:be.a.center},r.a.createElement("div",{className:be.a.Loader}))},Oe=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).showDate=function(e,t){var a=-(new Date).getTimezoneOffset()/60;return new Date(1e3*e-1e3*(a-t/3600)*3600).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchTodayWeather(this.props.city)}},{key:"renderTodayWeather",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",{className:ge.a.city},this.props.weather.name),r.a.createElement("small",{className:ge.a.date},this.showDate(this.props.weather.dt,this.props.weather.timezone)),r.a.createElement("img",{className:ge.a.conditionIcon,src:"http://openweathermap.org/img/wn/".concat(this.props.weather.icon,"@2x.png"),alt:"Condition icon"}),r.a.createElement("span",{className:ge.a.condition},this.props.weather.main)),r.a.createElement("div",null,r.a.createElement("span",{className:ge.a.current},Math.round(this.props.weather.temp),"\xb0"),r.a.createElement("span",{className:ge.a.realFeels},"Real feels: ",this.props.weather.feels_like,"\xb0"),r.a.createElement("span",{className:ge.a.MaxMin},this.props.weather.temp_max,"\xb0 / ",this.props.weather.temp_min,"\xb0")))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.props.error||!this.props.weather?r.a.createElement(i.a,{to:"/"}):null,r.a.createElement("div",{className:ge.a.WeatherToday},r.a.createElement("h1",null,"Today's weather"),this.props.loading?r.a.createElement(_e,null):this.renderTodayWeather()))}}]),a}(n.Component);var ke=Object(O.b)((function(e){return{weather:e.weatherToday.weather,city:e.weatherToday.city,error:e.weatherToday.error.isError,loading:e.weatherToday.loading}}),(function(e){return{fetchTodayWeather:function(t){return e(ee(t))}}}))(Oe),We=a(19),je=a.n(We),Te=function(e){return e.children},Se=[{id:"12 hour",value:12},{id:"36 hour",value:36},{id:"48 hour",value:48}],Ce=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).showDate=function(t){var a=-(new Date).getTimezoneOffset()/60,n=e.props.timezone/3600;return new Date(1e3*t-1e3*(a-n)*3600).toLocaleDateString("en-US",{hour:"numeric"}).split(",")[1]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchHourlyWeather()}},{key:"renderButtons",value:function(){var e=this;return Se.map((function(t,a){return r.a.createElement(L,{key:t.id+a,value:t.value,disabled:!1,onClick:function(){return e.props.changeFilter(t.value)}},t.id)}))}},{key:"renderHourly",value:function(){var e=this;return this.props.weather.map((function(t,a){return r.a.createElement(Te,null,a<e.props.activFilter?r.a.createElement("div",{key:a,className:je.a.WeatherHourly__item},r.a.createElement("span",null,e.showDate(t.dt)),r.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(t.icon,"@2x.png"),alt:"Weather condition"}),r.a.createElement("span",null,Math.round(t.temp),"\xb0")):null)}))}},{key:"showCityName",value:function(){return localStorage.getItem("city")?localStorage.getItem("city").split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):localStorage.getItem("city")}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.props.error?r.a.createElement(i.a,{to:"/"}):null,r.a.createElement("div",{className:je.a.WeatherHourly},r.a.createElement("h1",null,"Hourly weather"),r.a.createElement("div",{className:je.a.filterButtons},this.renderButtons()),r.a.createElement("h2",{className:je.a.cityName},this.showCityName()),r.a.createElement("div",null,this.props.loading?r.a.createElement(_e,null):this.renderHourly())))}}]),a}(n.Component);var xe=Object(O.b)((function(e){return{weather:e.weatherToday.weatherHourly,timezone:e.weatherToday.timezone,loading:e.weatherToday.loading,error:e.weatherToday.error.isError,activFilter:e.filter.activFilter}}),(function(e){return{fetchHourlyWeather:function(){return e(function(){var e=Object(D.a)(R.a.mark((function e(t){var a,n,r,o,c,l,i,u,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(re()),a=JSON.parse(localStorage.getItem("coordinates")),n=a.lon,r=a.lat,o=JSON.parse(localStorage.getItem("isError")),e.prev=4,e.next=7,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(r,"&lon=").concat(n,"&exclude=daily&units=metric&appid=4248d412b7d3efc097f20f1640cf0f2d"));case 7:return c=e.sent,e.next=10,c.json();case 10:if(l=e.sent,console.log(l),"404"!==l.cod&&!o){e.next=14;break}throw new Error("City not found");case 14:i=["dt","icon","temp"],u=l.hourly.map((function(e){return $(e,i)})),s=JSON.parse(localStorage.getItem("timezone")),t(oe(u,s)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),t(ce(e.t0.message));case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}())},changeFilter:function(t){return e(function(e){return{type:G,activFilter:e}}(t))}}}))(Ce),He=a(20),Ne=a.n(He),Ie=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).showDate=function(t){var a=-(new Date).getTimezoneOffset()/60,n=e.props.timezone/3600;return new Date(1e3*t-1e3*(a-n)*3600).toLocaleDateString("en-US",{weekday:"long"})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchWeeklyWeather()}},{key:"renderWeekly",value:function(){var e=this;return this.props.weather.map((function(t,a){return r.a.createElement("div",{key:a,className:Ne.a.WeatherWeekly__item},r.a.createElement("span",null,e.showDate(t.dt)),r.a.createElement("div",null,r.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(t.icon,"@2x.png"),alt:"Weather condition"})),r.a.createElement("span",null,Math.round(t.max),"\xb0"),r.a.createElement("span",null,Math.round(t.min),"\xb0"))}))}},{key:"showCityName",value:function(){return localStorage.getItem("city")?localStorage.getItem("city").split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):localStorage.getItem("city")}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.props.error?r.a.createElement(i.a,{to:"/"}):null,r.a.createElement("div",{className:Ne.a.WeatherWeekly},r.a.createElement("h1",null,"Weekly weather"),r.a.createElement("h2",{className:Ne.a.cityName},this.showCityName()),r.a.createElement("div",{className:Ne.a.description},r.a.createElement("span",null,"Weekday"),r.a.createElement("span",null,"Condition"),r.a.createElement("span",null,"Max"),r.a.createElement("span",null,"Min")),r.a.createElement("div",null,this.props.loading?r.a.createElement(_e,null):this.renderWeekly())))}}]),a}(n.Component);var Fe=Object(O.b)((function(e){return{weather:e.weatherToday.weatherWeekly,timezone:e.weatherToday.timezone,loading:e.weatherToday.loading,error:e.weatherToday.error.isError}}),(function(e){return{fetchWeeklyWeather:function(){return e(function(){var e=Object(D.a)(R.a.mark((function e(t){var a,n,r,o,c,l,i,u,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(le()),a=JSON.parse(localStorage.getItem("coordinates")),n=a.lon,r=a.lat,o=JSON.parse(localStorage.getItem("isError")),e.prev=4,e.next=7,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(r,"&lon=").concat(n,"&exclude=alerts&units=metric&appid=4248d412b7d3efc097f20f1640cf0f2d"));case 7:return c=e.sent,e.next=10,c.json();case 10:if("404"!==(l=e.sent).cod&&!o){e.next=13;break}throw new Error("City not found");case 13:i=["dt","icon","max","min"],u=l.daily.map((function(e){return $(e,i)})),s=JSON.parse(localStorage.getItem("timezone")),t(ie(u,s)),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),t(ue(e.t0.message));case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}())}}}))(Ie);var Le=function(){return r.a.createElement(_,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/weekly",component:Fe}),r.a.createElement(i.b,{path:"/hourly",component:xe}),r.a.createElement(i.b,{path:"/today",component:ke}),r.a.createElement(i.b,{path:"/",component:Ee})))},Me=(a(52),a(15)),Re=a(41),De={city:null,weather:{},weatherHourly:[],weatherWeekly:[],timezone:null,touched:!1,checkExisting:!1,error:{message:null,isError:!1},loading:!1},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(j.a)(Object(j.a)({},e),{},{city:t.city,loading:!0});case A:return Object(j.a)(Object(j.a)({},e),{},{weather:t.weather,touched:!0,error:{isError:!1},loading:!1});case U:return Object(j.a)(Object(j.a)({},e),{},{touched:!0,error:{message:t.error,isError:!0},loading:!1});case B:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case J:return Object(j.a)(Object(j.a)({},e),{},{weatherHourly:t.weatherHourly,timezone:t.timezone,error:{isError:!1},loading:!1});case Y:return Object(j.a)(Object(j.a)({},e),{},{error:{message:t.error,isError:!0},loading:!1});case K:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case V:return Object(j.a)(Object(j.a)({},e),{},{weatherWeekly:t.weatherWeekly,timezone:t.timezone,error:{isError:!1},loading:!1});case q:return Object(j.a)(Object(j.a)({},e),{},{error:{message:t.error,isError:!0},loading:!1});default:return e}},Ae={activFilter:12},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(j.a)(Object(j.a)({},e),{},{activFilter:t.activFilter});default:return e}},Be=Object(Me.c)({weatherToday:ze,filter:Ue}),Je=Object(Me.e)(Be,Object(Me.d)(Object(Me.a)(Re.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),Ye=r.a.createElement(O.a,{store:Je},r.a.createElement(l.a,null,r.a.createElement(Le,null)));c.a.render(Ye,document.getElementById("root"))}],[[53,1,2]]]);
//# sourceMappingURL=main.0577904f.chunk.js.map